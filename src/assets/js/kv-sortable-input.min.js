/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2018
 * @version 1.2.1
 *
 * JQuery Plugin for yii2-sortable-input.
 * 
 * Author: Kartik Visweswaran
 * Copyright: 2014, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */
!function(t){var e=function(e,i){this.$element=t(e),this.options=i,this.init(i),this.listen()};e.prototype={constructor:e,init:function(e){var i=this;i.$sortable=t("#"+e.sortableId),i.delimiter=e.delimiter,i.$form=i.$element.closest("form"),i.initialValue=i.getKeys(),i.initialContent=i.$sortable.html(),i.$element.val(i.initialValue)},listen:function(){var e=this;e.$sortable.on("sortupdate",function(i){var n=t(i.detail.origin.container);if(n.length){if(n.attr("id")!=e.$sortable.attr("id")){var a=t("input[data-sortable='"+n.attr("id")+"']");a.val(e.getKeys(n)).trigger("change")}e.$element.val(e.getKeys()).trigger("change")}}),e.$form.on("reset",function(){setTimeout(function(){e.$sortable.html(e.initialContent).sortable(e.options),e.$element.val(e.initialValue)},300)})},getKeys:function(){var e=this,i=arguments.length>0?arguments[0]:e.$sortable;return i.find("li").map(function(e,i){return t(i).data("key")}).get().join(e.delimiter)}},t.fn.sortableInput=function(i){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var a=t(this),r=a.data("sortableInput"),l="object"==typeof i&&i;r||a.data("sortableInput",r=new e(this,t.extend({},t.fn.sortableInput.defaults,l,t(this).data()))),"string"==typeof i&&r[i].apply(r,n)})},t.fn.sortableInput.defaults={sortableId:"",delimiter:","}}(jQuery);